import { createAsyncThunk, createSlice } from "@reduxjs/toolkit";
import relatedVideoApi from "../api/relatedVideoApi";

const relatedVideoSlice = createSlice({
    name: 'relatedVideo',
    initialState:{
        listRelatedVideo: [],
    },
    extraReducers:(builder) => {
        builder
        .addCase(fetchRelatedVideo.fulfilled, (state,action) => {
            state.listRelatedVideo = [...state.listRelatedVideo, ...action.payload.items]
        })
    }
})

export const fetchRelatedVideo = createAsyncThunk('relatedVideo/fetchRelatedVideo', async (videoId) => {
    const video = relatedVideoApi.getRelatedVideo(videoId);
    return video
})

export default relatedVideoSlice;

import axiosClient from "./axiosClient";
const key = "AIzaSyBExIRi0i7yTE9MkhJYyGVDdKx_3qv0oDk"
const relatedVideoApi = {
    getRelatedVideo(videoId){
        const url = `https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&relatedToVideoId=${videoId}=video&key=${key}`;
        return axiosClient.get(url);
    },
}

export default relatedVideoApi;